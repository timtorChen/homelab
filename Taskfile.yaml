---
version: "3"

includes:
  pre-commit: ./.taskfile/pre-commit.yaml
  terraform: ./.taskfile/terraform.yaml
  ansible: ./.taskfile/ansible.yaml
  secret: ./.taskfile/secret.yaml

tasks:
  init:
    desc: Initiate and install dependencies
    deps:
      - ansible:init
      - terraform:init
      - pre-commit:init
  check:
    desc: Check and lint codes
    deps:
      - pre-commit:check
      - terraform:lint
      - ansible:lint
      - yamllint
  yamllint:
    cmds:
      - yamllint .
